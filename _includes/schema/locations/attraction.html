{% assign attraction_types = "park,square" | split: "," %}
{% for point in page.map_points %}
{% if attraction_types contains point.type %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "TouristAttraction",
  "@id": "{{ page.url | absolute_url }}#{{ point.id }}",
  "name": "{{ point.name | escape }}",
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": {{ point.lat }},
    "longitude": {{ point.lng }}
  }{% if point.rating %},
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": {{ point.rating }},
    "ratingCount": 1
  }{% endif %}{% if point.visit_duration %},
  "estimatedDuration": "{{ point.visit_duration }}"{% endif %},
  "touristType": "individual",
  "isPartOf": {
    "@type": "Trip",
    "@id": "{{ page.url | absolute_url }}#trip"
  }
}
</script>
{% endif %}
{% endfor %}